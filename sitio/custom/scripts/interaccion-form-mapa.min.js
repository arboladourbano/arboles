function muestraTodaLaCiudad(){$("input#user_latlng").val(null),$("input#rdonde-ciudad").prop("checked",!0),window.new_user_marker&&(window.map.removeLayer(window.new_user_marker),window.map.removeLayer(window.new_user_circle),window.new_user_marker=void 0,window.new_user_circle=void 0)}function muestraPorAca(a,r,i,s){$("input#rdonde-mapa").prop("checked",!0),a&&$("input#user_latlng").val(a+" "+r),i&&i.panTo(new L.LatLng(a,r)),s&&(valida=validarBusqueda(),valida?document.getElementById("busca_arboles").submit():e.preventDefault())}function scrollAnimado(e){$("html, body").animate({scrollTop:$(e).offset().top},300,function(){window.location.hash=e})}function validarBusqueda(){var e,a,r=!1,i=$("select#id_especie").val();i>0?(e=!0,a=!1):(e=!1,a=!0);var s=$("input#user_sabores").prop("checked"),o=$("input#rdonde-mapa").prop("checked"),n=$("input#rdonde-ciudad").prop("checked"),t=$("input#user_latlng").val();if(1==e&&i>0)var c=!0;if(1==o&&t.length>1)var d=!0;if(0==a||0==n||1==s)var l=!0;return 1==l?(1==e&&(1==c?r=!0:($("#respecies-una-modal").modal("show"),r=!1)),1==o&&(1==d?r=!0:($("#rdonde-ciudad-modal").modal("show"),r=!1)),1==s&&(r=!0)):($("#respecies-todas-modal").modal("show"),r=!1),1==r?($("#empieza-busqueda").modal("show"),!0):!1}function muestraBorrarIdEspecie(){0==$("#id_especie").val()?$("#borrar_id_especie").addClass("hidden"):($("input#user_sabores").prop("checked",!1),$("#borrar_id_especie").removeClass("hidden"))}function muestraBorrarOrigen(){0==$("#rorigen-nativas").prop("checked")&&0==$("#rorigen-exoticas").prop("checked")?$("#borrar_origen").addClass("hidden"):$("#borrar_origen").removeClass("hidden")}$(document).ready(function(){$("input#respecies-todas").click(function(){muestraTodasLasEspecies()}),$("a#vaciar-posicion").click(function(e){e.preventDefault(),muestraTodaLaCiudad()}),$('input[type="radio"]').click(function(){"respecie"==$(this).attr("name")&&(0==$(this).attr("value")?$("#especies-lista").removeClass().addClass("hide"):$("#especies-lista").removeClass()),"rdonde"==$(this).attr("name")&&(0==$(this).attr("value")?muestraTodaLaCiudad():(scrollAnimado("#mapa"),muestraPorAca()))}),$("form#busca_arboles").submit(function(e){valida=validarBusqueda(),valida?$("form#busca_arboles").submit():e.preventDefault()}),$("nav a.scroll").on("click",function(e){e.preventDefault(),scrollAnimado(this.hash)}),$(".selectpicker").selectpicker({noneSelectedText:"No hay selección",noneResultsText:"No hay resultados"}),muestraBorrarIdEspecie(),$("#id_especie").change(function(){muestraBorrarIdEspecie()}),$("#borrar_id_especie").click(function(e){e.preventDefault(),$("#id_especie").selectpicker("val",0)}),$("input#user_sabores").click(function(){1==$(this).prop("checked")&&$("#id_especie").selectpicker("val",0)}),muestraBorrarOrigen(),$("#rorigen-nativas, #rorigen-exoticas").change(function(){muestraBorrarOrigen()}),$("#borrar_origen").click(function(e){e.preventDefault(),$("#rorigen-nativas, #rorigen-exoticas").prop("checked",!1)}),$(".mas-filtros").click(function(){"none"==$("#mas-filtros").css("display")?($("#mas-filtros").slideDown(),$(this).html("menos filtros")):($("#mas-filtros").slideUp(),$(this).html("más filtros"))})});