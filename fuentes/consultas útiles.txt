********************* SABER CUÁNTOS ÁRBOLES DE ALGUNA ESPECIE HAY EN CADA ESPACIO VERDE

SELECT espacio_verde, COUNT(`id_especie`) FROM 1_individuos_ev WHERE `NOMBRE_GEN` LIKE 'jacaranda' GROUP BY `espacio_verde`
ORDER BY COUNT(id_especie) DESC










CONSULTA PARA BUSCAR DENTRO DE UN RADIO
http://gis.stackexchange.com/questions/31628/find-points-within-a-distance-using-mysql

SELECT
  id, (
    3959 * acos (
      cos ( radians(78.3232) )
      * cos( radians( lat ) )
      * cos( radians( lng ) - radians(65.3234) )
      + sin ( radians(78.3232) )
      * sin( radians( lat ) )
    )
  ) AS distance
FROM markers
HAVING distance < 30
ORDER BY distance
LIMIT 0 , 20;







// ACTUALIZAR. Convertir deste string lat/lng a array coordenadas
UPDATE 1_individuos
SET coordenadas = PointFromText(CONCAT('POINT(',1_individuos.lat,' ',1_individuos.lng,')'))
WHERE `id_fuente` = 3



// TODAS LAS ESPECIES (union de calle y espacios verdes)
(SELECT distinct `NOMBRE_CIE`, `NOMBRE_COM` from `1_individuos_ev`)
UNION distinct 
(SELECT distinct   `NOMBRE_CIE`, `NOMBRE_COM`  from 1_individuos_calle)
order by NOMBRE_CIE

// TODAS LAS ESPECIES Y CANTIDAD!!!!
select sum(qty) AS CANT, NOMBRE_CIE, NOMBRE_COM, id_especie
		from (
			select count(NOMBRE_CIE) as qty, NOMBRE_CIE, NOMBRE_COM, `id_especie`
			from 1_individuos_ev
			group by `id_especie`
		union all
			select count(NOMBRE_CIE) as qty, NOMBRE_CIE, NOMBRE_COM, `id_especie`
			from 1_individuos_calle
			group by `id_especie`
		) t
		GROUP BY `id_especie`
		ORDER BY CANT DESC

// consulta para obtener especies diferentes
select id_especie, `NOMBRE_FAM`, NOMBRE_CIE, NOMBRE_COM, `TIPO_FOLLA`, `ORIGEN` from
(
select NOMBRE_CIE, `NOMBRE_FAM`, NOMBRE_COM, id_especie, `TIPO_FOLLA`, `ORIGEN` from 1_individuos_ev group by id_especie                                            
union all
select NOMBRE_CIE, `NOMBRE_FAM`, NOMBRE_COM, id_especie, `TIPO_FOLLA`, `ORIGEN` from 1_individuos_calle group by id_especie
) t
GROUP BY id_especie 








SELECT count(i.id_especie) as CANT, e.id_especie, e.NOMBRE_CIE, e.NOMBRE_COM
FROM 1_individuos AS i, 2_especies AS e
WHERE i.id_especie = e.id_especie
GROUP BY e.id_especie


SELECT i.id_especie, e.NOMBRE_CIE, e.NOMBRE_COM
FROM 1_individuos AS i, 2_especies AS e
WHERE i.id_especie = e.id_especie




select i.id_especie, e.NOMBRE_CIE, e.NOMBRE_COM  from 1_individuos i inner join 2_especies e on i.id_especie=e.id_especie





// obtener géneros (acacia, fraxinus, ulmus, etc)


SELECT distinct SUBSTRING_INDEX(`NOMBRE_CIE`,' ',1) from
2_especies
order by
nombre_cie





// CANTIDAD x ESPECIE en ESPECIOS VERDES
SELECT i.id_especie, count(i.id_especie) AS cantidad, e.NOMBRE_CIE
FROM 1_individuos AS i, 2_especies AS e
WHERE i.id_especie = e.id_especie AND i.donde = 1
GROUP BY id_especie
ORDER BY cantidad DESC 


// CIERTAS ESPECIES (POR ID) SÓLO EN ESPACIOS VERDES
SELECT i.id_especie, i.id_individuo, e.NOMBRE_CIE, e.NOMBRE_COM, e.ORIGEN, e.TIPO_FOLLA, i.ALTURA_TOT, i.DIAMETRO, i.INCLINACIO, i.espacio_verde, i.lat, i.lng
FROM 1_individuos AS i, 2_especies AS e
WHERE i.id_especie = e.id_especie AND i.donde = 1 AND (i.id_especie = 330 OR i.id_especie = 10 OR i.id_especie = 11 OR i.id_especie = 25 OR i.id_especie = 45 OR i.id_especie = 1 OR i.id_especie = 2 OR i.id_especie = 31 OR i.id_especie = 27 OR i.id_especie = 6 OR i.id_especie = 55 OR i.id_especie = 342 OR i.id_especie = 14 OR i.id_especie = 4 OR i.id_especie = 3 OR i.id_especie = 77 OR i.id_especie = 43 OR i.id_especie = 65 OR i.id_especie = 999 OR i.id_especie = 7 OR i.id_especie = 247 OR i.id_especie = 369 OR i.id_especie = 9 OR i.id_especie = 361 OR i.id_especie = 35 OR i.id_especie = 79 OR i.id_especie = 33 OR i.id_especie = 375 OR i.id_especie = 19 OR i.id_especie = 211 OR i.id_especie = 12 OR i.id_especie = 58 OR i.id_especie = 17 OR i.id_especie = 53 OR i.id_especie = 8 OR i.id_especie = 41 OR i.id_especie = 62 OR i.id_especie = 13 OR i.id_especie = 18 OR i.id_especie = 34 OR i.id_especie = 15 OR i.id_especie = 132 OR i.id_especie = 38 OR i.id_especie = 73 OR i.id_especie = 21 OR i.id_especie = 64 OR i.id_especie = 359 OR i.id_especie = 46 OR i.id_especie = 379 OR i.id_especie = 37 OR i.id_especie = 331 OR i.id_especie = 24 OR i.id_especie = 67 OR i.id_especie = 20 OR i.id_especie = 249 OR i.id_especie = 54 OR i.id_especie = 81 OR i.id_especie = 234 OR i.id_especie = 93 OR i.id_especie = 78 OR i.id_especie = 23 OR i.id_especie = 59 OR i.id_especie = 96 OR i.id_especie = 75 OR i.id_especie = 998 OR i.id_especie = 42 OR i.id_especie = 39 OR i.id_especie = 340 OR i.id_especie = 232 OR i.id_especie = 367 OR i.id_especie = 74 OR i.id_especie = 381 OR i.id_especie = 357 OR i.id_especie = 72 OR i.id_especie = 26 OR i.id_especie = 5 OR i.id_especie = 140 OR i.id_especie = 109 OR i.id_especie = 123 OR i.id_especie = 28 OR i.id_especie = 29 OR i.id_especie = 90 OR i.id_especie = 149 OR i.id_especie = 363 OR i.id_especie = 49 OR i.id_especie = 40 OR i.id_especie = 76 OR i.id_especie = 66 OR i.id_especie = 89 OR i.id_especie = 260 OR i.id_especie = 145 OR i.id_especie = 56 OR i.id_especie = 192 OR i.id_especie = 51 OR i.id_especie = 141 OR i.id_especie = 335 OR i.id_especie = 226 OR i.id_especie = 366 OR i.id_especie = 52 OR i.id_especie = 190 OR i.id_especie = 142 OR i.id_especie = 30 OR i.id_especie = 50 OR i.id_especie = 180 OR i.id_especie = 98 OR i.id_especie = 95 OR i.id_especie = 97 OR i.id_especie = 91 OR i.id_especie = 107 OR i.id_especie = 153 OR i.id_especie = 354 OR i.id_especie = 114 OR i.id_especie = 225 OR i.id_especie = 374 OR i.id_especie = 22 OR i.id_especie = 47 OR i.id_especie = 128 OR i.id_especie = 36 OR i.id_especie = 82 OR i.id_especie = 63 OR i.id_especie = 344 OR i.id_especie = 71 OR i.id_especie = 111 OR i.id_especie = 57 OR i.id_especie = 350 OR i.id_especie = 365 OR i.id_especie = 152 OR i.id_especie = 345 OR i.id_especie = 333 OR i.id_especie = 80 OR i.id_especie = 101 OR i.id_especie = 256 OR i.id_especie = 230 OR i.id_especie = 147 OR i.id_especie = 105 OR i.id_especie = 219 OR i.id_especie = 32 OR i.id_especie = 113 OR i.id_especie = 236 OR i.id_especie = 102 OR i.id_especie = 231 OR i.id_especie = 414 OR i.id_especie = 83 OR i.id_especie = 376 OR i.id_especie = 167 OR i.id_especie = 173 OR i.id_especie = 69 OR i.id_especie = 130 OR i.id_especie = 144 OR i.id_especie = 88 OR i.id_especie = 70 OR i.id_especie = 341 OR i.id_especie = 68 OR i.id_especie = 92 OR i.id_especie = 348 OR i.id_especie = 61 OR i.id_especie = 131 OR i.id_especie = 194 OR i.id_especie = 353 OR i.id_especie = 44 OR i.id_especie = 370 OR i.id_especie = 362 OR i.id_especie = 136 OR i.id_especie = 442 OR i.id_especie = 87 OR i.id_especie = 337 OR i.id_especie = 343 OR i.id_especie = 314 OR i.id_especie = 418 OR i.id_especie = 338 OR i.id_especie = 207 OR i.id_especie = 86 OR i.id_especie = 100 OR i.id_especie = 306 OR i.id_especie = 336 OR i.id_especie = 103 OR i.id_especie = 339 OR i.id_especie = 334 OR i.id_especie = 383 OR i.id_especie = 85 OR i.id_especie = 48 OR i.id_especie = 371 OR i.id_especie = 218 OR i.id_especie = 60 OR i.id_especie = 352 OR i.id_especie = 431 OR i.id_especie = 417 OR i.id_especie = 84 OR i.id_especie = 373 OR i.id_especie = 356 OR i.id_especie = 368 OR i.id_especie = 389 OR i.id_especie = 358 OR i.id_especie = 351 OR i.id_especie = 148 OR i.id_especie = 311 OR i.id_especie = 394)

